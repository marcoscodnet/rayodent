<?phpclass PDFInformePracticaordenpracticaAction extends Action {    protected function getEntidad() {        //recuperamos dado su identifidor.        $id = FormatUtils::getParam('id', 0);        $criterio = new CriterioBusqueda();        $criterio->addFiltro('cd_practicaordenpractica', $id, '=');        $manager = new PracticaordenpracticaManager();        $oPracticaordenpractica = $manager->getPracticaordenpractica($criterio);        return $oPracticaordenpractica;    }    protected function getTitulo() {        return 'Informe RX';    }    public function execute() {        try {            $this->execute_pdf();        } catch (GenericException $ex) {//CdtUtils::log_debug("No se puede imprimir la etiqueta porque no hay una prï¿½ctica.");            $forward = $this->getForwardError();            $this->setDs_forward_params('er=1' . '&msg=' . $ex->getMessage() . '&code=' . $ex->getCode());            return $forward;        }    }    public function execute_pdf() {//tipo de la copia del remito.        $oPracticaordenpractica = $this->getEntidad();        if (!empty($oPracticaordenpractica)) {            $pdf = new PDFPrint('P', 'cm', 'A4');            $pdf = $this->generarInforme($pdf, $oPracticaordenpractica);//para que no haga el forward.            $pdf->Output("Informe_".$oPracticaordenpractica->getCd_practicaordenpractica().".pdf", 'D');        } else {            throw new GenericException("Hubo un error al intentar imprimir la factura.");        }    }    public function generarInforme($pdf, Practicaordenpractica $oPracticaordenpractica) {        //armamos el pdf.        $pdf->AddPage();        $pdf->SetLeftMargin(0);        $pdf->SetTopMargin(0);        $pdf->SetFont('Arial', '', 10);        //$pdf->SetAutoPageBreak(false);        $pdf->SetY(1.8);        $pdf->SetX(1.7);        $pdf->Cell(16.8, 2.5, "", 1, 0, 'L');        $pdf->SetY(2);        $pdf->SetX(2);        $pdf->SetFont('Arial', 'B', 30);        $pdf->Cell(7, 1.6, "RAYODENT", 0, 1, 'L');        $pdf->SetFont('Arial', '', 11);        $pdf->SetX(2);        $pdf->Cell(7, 0.5, "Radiografías Odontológicas", 0, 0, 'L');        $pdf->SetY(2);        $pdf->SetX(11);        $pdf->Cell(7, 0.7, "Av. 44 NÂº 519 (e/ 5 y 6)", 0, 1, 'R');        $pdf->SetX(11);        $pdf->Cell(7, 0.7, "Te: 0221 421-2481", 0, 1, 'R');        $pdf->SetX(11);        $pdf->Cell(7, 0.7, "La Plata (1900)", 0, 0, 'R');        $this->parseInforme($pdf, $oPracticaordenpractica);        return $pdf;    }    public function parseInforme($pdf, $oPracticaordenpractica) {        /* S.Sra.:   acï¿½ irï¿½ el nombre del paciente          Dr./Dra.:   acï¿½ irï¿½ el nombre del profesional          acï¿½ irï¿½ la prï¿½ctica          Informe:    acï¿½ irï¿½ el detalle del informe         */        $informe = $oPracticaordenpractica->getInforme();        $oInforme = FormatUtils::ifEmpty($informe, new Informe());        $pdf->SetFont('Arial', '', 10);        $pdf->SetY(5);        $pdf->SetX(2);        $pdf->Cell(2.5, 1, "S.Sra.:", 0, 0, 'L');        $pdf->Cell(13.5, 1, $oInforme->getDs_apynom(), 0, 1, 'L');        $pdf->SetX(2);        $pdf->Cell(2.5, 1, "Dr./Dra.:", 0, 0, 'L');        $pdf->Cell(13.5, 1, $oInforme->getDs_profesional(), 0, 1, 'L');        $pdf->SetX(2);        $pdf->Cell(2.5, 1, "Estudio RX:", 0, 0, 'L');        $pdf->Cell(13.5, 1, $oInforme->getDs_estudiorx(), 0, 1, 'L');        $pdf->SetX(2);        $pdf->Cell(2.5, 1, "Informe:", 0, 1, 'L');        $pdf->SetFont('Arial', '', 9);        $pdf->SetX(2);        $pdf->MultiCell(16, 0.5, $oInforme->getDs_informe(), 0, "J", 0);        $pdf->SetFont('Arial', '', 11);        $fecha = "La Plata,        de                                 de 20";        $pdf->Ln(0.5);        $pdf->SetX(2);        $pdf->Cell(13.5, 1, $fecha, 0, 1, 'L');    }    protected function getContenido() {        return false;    }    public function getForwardError() {        return "pdf_informe_practicaordenpractica_error";    }}